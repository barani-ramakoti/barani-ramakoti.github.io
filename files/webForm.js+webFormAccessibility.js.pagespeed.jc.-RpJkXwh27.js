var mod_pagespeed_iai5KnG0Dn = "function showOverlay(){var over='<div id=\"overlay\">'+'<img id=\"loading\" src=\"/eapp/resource/images/ajax-loader_blue.gif\" alt=\"Loading\">'+'</div>';$(over).appendTo(\"#body\");}\nfunction hideOverlay(){var overlay=eapp.webforms.overlay;if(overlay.timeoutId){clearTimeout(overlay.timeoutId);}\noverlay.timeoutId=undefined;overlay.showTime=undefined;$(\"#overlay\").remove();}\nfunction modifyActivity(evtObj,uniqueIndex,rowData){var gridId=getGridId(evtObj);var rowIndex=getGridRowIndex(gridId,uniqueIndex);setGridRowSelection(gridId,rowIndex,true);var cell=getGridRowCell(gridId,uniqueIndex);var divId=cell.value;setNextAction(divId+\"_modify\");var dataObj=getData();var readOnlyMode=eapp.webforms.display.readOnlyMode;var jsonData=JSON.stringify(dataObj);$.ajax({url:\"/eapp/showNext.do\",data:jsonData,type:\"POST\",dataType:\"json\",beforeSend:function(xhr){xhr.setRequestHeader(\"Accept\",\"application/json\");xhr.setRequestHeader(\"Content-Type\",\"application/json\");},success:function(responseObject){removeFixedErrors(responseObject.errors);var errorsFlags={};if(responseObject.html!==null&&responseObject.html!==\"\"){getElement(\"#\"+divId).html(responseObject.html);if(responseObject.errors!==null){errorsFlags=addErrors(divId,responseObject.errors,false);}\nif(readOnlyMode){var divControls=getAllFormControls(divId);makeDivContentReadOnly(divControls,divId);}}\nif((typeof onModifyActionComplete!==\"undefined\")&&jQuery.isFunction(onModifyActionComplete)){onModifyActionComplete(gridId,responseObject.webForm);}}});}\nfunction makeDivContentReadOnly(divControls,divId){if(eapp.webforms.display.readOnlyMode){var allButtons=getAllButtons(divId);var allControls=$.merge(divControls,allButtons);addReadOnlyAttribute(allControls);}}\nfunction disableSaveAndExit(){var $saveAndExitButton=$(\"#saveAndExitBtn\");if($saveAndExitButton){$saveAndExitButton.attr(\"disabled\",true);}\n$saveAndExitButton=$(\"#saveAndExitBtn2\");if($saveAndExitButton){$saveAndExitButton.attr(\"disabled\",true);}}\nfunction enableSaveAndExit(){var $saveAndExitButton=$(\"#saveAndExitBtn\");if($saveAndExitButton){$saveAndExitButton.attr(\"disabled\",false);}\n$saveAndExitButton=$(\"#saveAndExitBtn2\");if($saveAndExitButton){$saveAndExitButton.attr(\"disabled\",false);}}\nfunction getGridId(eventObj){if(eventObj&&eventObj.data&&eventObj.data.tbWhole){return eventObj.data.tbWhole.id;}}\nfunction getGridRowCell(gridId,uniqueIndex){return $(\"#\"+gridId).appendGrid('getCellCtrlByUniqueIndex','divCol',uniqueIndex);}\nfunction getGridRowIndex(gridId,uniqueIndex){return $(\"#\"+gridId).appendGrid('getRowIndex',uniqueIndex);}\nfunction getGridRowCount(gridId){return getElement(gridId).appendGrid('getRowCount');}\nfunction setGridRowSelection(gridId,rowIndex,isSelected){var grid=$(\"#\"+gridId);if(grid){var numberOfRows=grid.appendGrid('getRowCount');for(var i=0;i<numberOfRows;i++){grid.appendGrid('setCtrlValue','selected',i,false);}\nif(isSelected&&isSelected===true)\ngrid.appendGrid('setCtrlValue','selected',rowIndex,isSelected);scrollToElement(grid);}}\nfunction scrollToElement(grid){return $('html, body').animate({scrollTop:grid.parent().parent().parent().offset().top},1000);}\nfunction getWebFormDate(dateString,isFuzzy){var webFormDate={};var selectedYear={};var constants=eapp.webforms.constants;var dateSeparator=constants.dateSeparator;dateString=dateString.replace(/-/gi,dateSeparator);var dateArr=dateString.split(dateSeparator);if(dateArr.length<(isFuzzy?2:3)||dateArr[0]==\"undefined\"||dateArr[1]==\"undefined\"||(!isFuzzy&&dateArr[2]==\"undefined\"))\nreturn null;selectedYear=new Lov(dateArr[0],true);webFormDate.year=selectedYear;var value=dateArr[1];if(value==constants.dateUnknownDisplay){value=constants.dateUnknown;}\nvar selectedMonth=new Lov(value,true);webFormDate.month=selectedMonth;if(!isFuzzy){value=dateArr[2];if(value==constants.dateUnknownDisplay){value=constants.dateUnknown;}\nvar selectedDay=new Lov(value,true);webFormDate.day=selectedDay;}\nreturn webFormDate;}\nfunction getWebFormDateAsString(webFormDate,isFuzzy){if(webFormDate){if(webFormDate.year&&webFormDate.month&&webFormDate.day&&webFormDate.year.lovId!=-1&&webFormDate.month.lovId!=-1&&(isFuzzy||(!isFuzzy&&webFormDate.day.lovId!=-1))){return eapp.webforms.formatDate(webFormDate.year.lovId,webFormDate.month.lovId,webFormDate.day.lovId,isFuzzy);}else{if(webFormDate.year&&webFormDate.year.lovId!=-1){var year=webFormDate.year.lovId;if(webFormDate.month&&webFormDate.month.lovId!=-1)\nmonth=webFormDate.month.lovId;var day=null;if(!isFuzzy&&webFormDate.day&&webFormDate.day.lovId!=-1)\nday=webFormDate.day.lovId;return eapp.webforms.formatDate(year,month,day,isFuzzy);}}}else{return null;}}\nfunction getSelectedValue(elementId,notSelectedValue){selectedElement=getElement('#'+elementId+' :selected');return(selectedElement?(selectedElement.val()==notSelectedValue?\"\":selectedElement.val()):\"\");}\nfunction appendRow(gridId,divId){var fullGridId='#tblAppendGrid_'+gridId;var controls=getAllFormControls(divId);var columns=[];var gridEl=getElement(fullGridId);var numberOfRows=gridEl.appendGrid('getRowCount');var lastRowIndex=numberOfRows-1;if(lastRowIndex==-1){lastRowIndex=0;}\nvar modify=false;for(var index=0;index<numberOfRows;index++){var selected=gridEl.appendGrid('getCtrlValue','selected',index);if(selected==\"true\"){lastRowIndex=index;modify=true;gridEl.appendGrid('setCtrlValue','selected',index,false);}}\nif(modify){var columnsNames=gridEl.find(\"td.ui-widget-content\");columnsNames.each(function(){if(this.id){var columnName=this.id.split(\"_td_\")[0];var columnId=columnName.split(\"_\")[1];var cellCtrl=gridEl.appendGrid('getCellCtrl',columnId,lastRowIndex);if(cellCtrl!==null){cellCtrl.setAttribute(\"data-lovid\",-1);cellCtrl.value=\"\";}}});}\nfor(index=0;index<controls.length;index++){var col={};var control=controls[index];var properties=control.id.split(\"-\");var propertyName=properties[properties.length-1];if(propertyName=='year'&&control.type==\"select-one\"){var isFuzzyDate=$(control).hasClass(\"fuzzy-date\");var dateObjName=properties[0];var monthName=dateObjName+\"-month\";var dayName=dateObjName+\"-day\";var monthSelect=getElement('[id=\"'+monthName+'\"]')[0];var daySelect=(!isFuzzyDate)?getElement('[id=\"'+dayName+'\"]')[0]:null;var yearValue=getSelectedValue(control.id,\"year_not_selected\");var monthValue=getSelectedValue(monthSelect.id,\"month_not_selected\");var dayValue=(!isFuzzyDate)?getSelectedValue(daySelect.id,\"day_not_selected\"):null;var fullDate=eapp.webforms.formatDate(yearValue,monthValue,dayValue,isFuzzyDate);propertyName=dateObjName;col.value=fullDate;col.name=propertyName;columns.push(col);}else{if(control.type==\"select-one\"&&propertyName!='month'&&propertyName!='day'){col.name=propertyName;if(control.selectedIndex==-1){col.value=null;col.lovId=-1;}else{col.value=control[control.selectedIndex].text.trim();col.lovId=control.value;}\ncolumns.push(col);}else if(control.type==\"checkbox\"){if(isElementArray(control.id)){var ar=[];for(var ii=0;ii<columns.length;ii++){if(columns[ii].name==propertyName){ar=columns[ii].value;break;}}\nar.push(new Lov(control.value,control.checked).toString());if(ar.length>1)\ncontinue;col.value=ar;}else{col.name=propertyName;col.value=control.checked;columns.push(col);}}else if(control.type==\"text\"){col.name=propertyName;col.value=control.value.trim();columns.push(col);}}}\nif(!modify){gridEl.appendGrid('appendRow',1);numberOfRows=gridEl.appendGrid('getRowCount');lastRowIndex=numberOfRows-1;}\ncolumns.forEach(function(record){gridEl.appendGrid('setCtrlValue',record.name,lastRowIndex,record.value);if(record.lovId!==undefined){var cellCtrl=gridEl.appendGrid('getCellCtrl',record.name,lastRowIndex);if(cellCtrl!==null){cellCtrl.setAttribute(\"data-lovid\",record.lovId);}}});return lastRowIndex;}\nfunction Lov(lovId,selected,englishDescription,frenchDescription){var that=this;if(!lovId){that.lovId=eapp.webforms.constants.lovIdUnknown;}else{that.lovId=lovId;}\nthat.selected=selected;if(arguments.length===3){that.longEnglishDescription=englishDescription;}\nif(arguments.length===4){that.longEnglishDescription=englishDescription;that.longFrenchDescription=frenchDescription;}\nthat.toString=function(){var obj={};obj.lovId=that.lovId;obj.selected=that.selected;obj.longEnglishDescription=that.longEnglishDescription;obj.longFrenchDescription=that.longFrenchDescription;return obj;};}\nfunction validateAgainstServer(modifiedRowIndex,gridId,divId){var dataObj=getData();var jsonData=JSON.stringify(dataObj);$.ajax({url:\"/eapp/showNext.do\",data:jsonData,type:\"POST\",dataType:\"json\",beforeSend:function(xhr){xhr.setRequestHeader(\"Accept\",\"application/json\");xhr.setRequestHeader(\"Content-Type\",\"application/json\");},success:function(responseObject){removeFixedErrors(responseObject.errors);var errorsFlags={};if(responseObject.errors!==null){errorsFlags=addErrors(divId,responseObject.errors,false);}\nvar gridEl=$(\"#tblAppendGrid_\"+gridId);if(!errorsFound(errorsFlags)){showHTML(responseObject,divId)}else{if(gridEl){gridEl.appendGrid('removeRow',modifiedRowIndex);}}}});}\nfunction appendGridRow(gridId,divId){var modifiedRowIndex=appendRow(gridId,divId);var containerId=gridId.replace(/_/g,\".\")\nvar nextAction=divId+\"_append_\"+containerId+\"_\"+Number(modifiedRowIndex+1);setNextAction(nextAction);validateAgainstServer(modifiedRowIndex,gridId,divId);}\nfunction errorsFound(errorsFlags){return errorsFlags.nonMandatoryErrors||errorsFlags.mandatoryErrors;}\nfunction clearAllFields(divId){var divControls=getAllFormControls(divId);$.each(divControls,function(index,control){if(control.type=='select-one'){control.selectedIndex=-1;}else if(control.type=='checkbox'){control.checked=false;}else{control.value=\"\";}});}\nfunction getGridData(dataObj){var allGrids=getElement('table[id^=\"tblAppendGrid\"]');$.each(allGrids,function(index,tables){var modelObjList=[];var gridId=\"#\"+tables.id;var gridEl=getElement(gridId);if(!gridEl.appendGrid('isReady')){return;}\nvar gridValues=gridEl.appendGrid(\"getAllValue\");$.each(gridValues,function(index,value){var uniqueIndex=gridEl.appendGrid(\"getUniqueIndex\",index);var modelObj={};var properties=getPropertyNames(value);for(var i=0;i<properties.length;i++){var fieldName=properties[i];if('divCol'==fieldName){continue;}\nif('selected'==fieldName){modelObj.selected=value.selected;continue;}\nvar cellControl=gridEl.appendGrid(\"getCellCtrl\",fieldName,index);addToJsonObject(fieldName,value[fieldName],modelObj,cellControl);}\nmodelObj.id=index+1;modelObj.rowNumber=modelObj.id;modelObjList[index]=modelObj;});var propertyName=gridId.substr(gridId.indexOf(\"_\")+1).replace(/_/gi,\".\");if(propertyName.indexOf('.')>0){getObjectValue(propertyName,modelObjList,dataObj);}else{dataObj[propertyName]=modelObjList;}});}\nfunction createGridColumn(gridColumn){var ctrlAttr={};ctrlAttr.readonly=gridColumn.readOnly;if(gridColumn.controlType!=\"select\"){ctrlAttr.size=gridColumn.size;}\nvar column={};column.name=gridColumn.columnName;ctrlAttr[\"data-tableDescription\"]=gridColumn.tableDescription;if(gridColumn.options!==undefined){column.options=gridColumn.options;}\nif(gridColumn.tableCaption!==undefined){ctrlAttr[\"data-tableCaption\"]=gridColumn.tableCaption;}\nif(gridColumn.labelText!==undefined){column.display=gridColumn.labelText;ctrlAttr[\"data-display\"]=gridColumn.labelText;}\nif(gridColumn.invisible!==undefined){column.invisible=true;}\nif(gridColumn.controlType==\"select\"&&gridColumn.options!==undefined){column.ctrlOptions=createGridOptions(gridColumn.options);}\nif(gridColumn.dataType==eapp.webforms.dataTypes.lov){ctrlAttr[\"data-lovId\"]=\"\";ctrlAttr[\"data-codeTableName\"]=gridColumn.codeTableName;}\ncolumn.type=gridColumn.controlType;ctrlAttr[\"data-dataType\"]=gridColumn.dataType;column.ctrlAttr=ctrlAttr;column.ctrlClass=\" form-control ignore grid-control width-100\";return column;}\nfunction createGridOptions(webFormDictionaryList){var resultedOptions=[];var option={};$.each(webFormDictionaryList,function(){option={};option.label=getLocalizedDescription(this);option.value=this.lovId;option.selected=false;resultedOptions.push(option);});return resultedOptions;}\nfunction updateOptions(gridControl,lov,selectName,rowIndex){var uniqueIndexOfTheFirstRow=gridControl.appendGrid('getUniqueIndex',0);var selectCtrl=gridControl.appendGrid('getCellCtrl',selectName,rowIndex);if(selectCtrl!==undefined&&selectCtrl!==null){var options=selectCtrl.options;if(options){var length=selectCtrl.options.length;for(var i=0;i<length;i++){if(options[i].value==lov.lovId){options[i].selected=true;return;}}}}}\nfunction getLocalizedDescription(object){if(object===undefined)\nreturn\"\";var languageName=\"English\";if(eapp.webforms.locale.currentLanguageCode==eapp.webforms.constants.languageCodes.french){languageName=\"French\";}\nvar fullLanguageKey=\"long\"+languageName+\"Description\";if(object.hasOwnProperty(fullLanguageKey)){return object[fullLanguageKey];}else{if(console)\nconsole.warn(\"Failed to find \"+languageName+\" description for object\");return\"\";}}\nfunction createReadOnlyGrid(gridId,tableCaption,columns,initData,divId,idPrefix){var gridColumns=[];var modifyRowLabel=eapp.webforms.locale.modifyRow;if(eapp.webforms.display.readOnlyMode){modifyRowLabel=eapp.webforms.locale.viewRow;}\nvar arr=gridId.split(\"_\");var tableDescription=arr[arr.length-1];for(var i=0;i<columns.length;i++){columns[i].tableCaption=tableCaption;columns[i].tableDescription=tableDescription;gridColumns.push(createGridColumn(columns[i]));}\naddSystemHiddenFields(gridColumns,divId,tableCaption);var gridControl=getElement('#tblAppendGrid_'+gridId);gridControl.appendGrid({initRows:0,hideRowNumColumn:true,hideButtons:{insert:true,append:true,removeLast:true,moveUp:true,moveDown:true},columns:gridColumns,i18n:{rowEmpty:eapp.webforms.locale.rowEmpty},nameFormatter:function(idPrefix,name,uniqueIndex){return(idPrefix+\".\"+name).replace(/_/g,\".\")+\"_\"+uniqueIndex;},idPrefix:idPrefix,customGridButtons:{remove:function(){var button=$(\"<button class='btn btn-default'></button>\");button.append(\"<i class='icon icon-delete' aria-hidden='true'></i>\"+\"<span class='sr-only-sm'>\"+eapp.webforms.locale.deleteRow+\"</span>\");return button;}},customRowButtons:[{uiButton:{icons:{primary:'icon icon-edit'},label:modifyRowLabel,text:true},click:modifyActivity,btnClass:'btn btn-default',btnAttr:{title:\"Modify\"},atTheFront:true}]});initGridWithData(gridControl,gridColumns,initData);initGridHeadings('tblAppendGrid_'+gridId,tableCaption);}\nfunction isGridNotInitialized(gridId){var gridEl=getElement(\"table[id='tblAppendGrid_\"+gridId+\"']\");return gridEl&&gridEl.length>0&&gridEl.appendGrid('isReady')==false;}\nfunction createGrid(gridId,tableCaption,columns,initData,divId,idPrefix,isReadOnlyGrid,hideRowNumColumn){if(isReadOnlyGrid){createReadOnlyGrid(gridId,tableCaption,columns,initData,divId,idPrefix);return;}\nvar gridColumns=[];var dataTypes=eapp.webforms.dataTypes;var locale=eapp.webforms.locale;var arr=gridId.split(\"_\");var tableDescription=arr[arr.length-1];for(var i=0;i<columns.length;i++){columns[i].tableDescription=tableDescription;columns[i].tableCaption=tableCaption;gridColumns.push(createGridColumn(columns[i]));}\naddSystemHiddenFields(gridColumns,divId,tableCaption);var gridControl=getElement('#tblAppendGrid_'+gridId);gridControl.appendGrid({initRows:0,hideRowNumColumn:hideRowNumColumn,hideButtons:{insert:false,append:true,remove:false,removeLast:true,moveUp:true,moveDown:true},columns:gridColumns,i18n:{rowEmpty:eapp.webforms.locale.rowEmpty},nameFormatter:function(idPrefix,name,uniqueIndex){if(idPrefix===''){return(name).replace(/_/g,\".\")+\"_\"+uniqueIndex;}\nreturn(idPrefix+\".\"+name).replace(/_/g,\".\")+\"_\"+uniqueIndex;},idPrefix:idPrefix,customGridButtons:{insert:function(){var button=$(\"<button class='btn btn-default'></button>\");button.append(\"<i class='icon icon-plus' aria-hidden='true'></i><span class='sr-only-sm'>\"+eapp.webforms.locale.insertRow+\"</span>\");return button;},remove:function(){var button=$(\"<button class='btn btn-default'></button>\");button.append(\"<i class='icon icon-delete' aria-hidden='true'></i><span class='sr-only-sm'>\"+eapp.webforms.locale.deleteRow+\"</span>\");return button;}}});initGridWithData(gridControl,gridColumns,initData);initGridHeadings('tblAppendGrid_'+gridId,tableCaption);}\nfunction addSystemHiddenFields(columns,divId,tableCaption){if(divId===\"\")\nreturn;var columnWithIsSelected={};columnWithIsSelected.name=\"selected\";columnWithIsSelected.type=\"hidden\";columnWithIsSelected.value=false;columns.push(columnWithIsSelected);var columnWithDivId={};columnWithDivId.name=\"divCol\";columnWithDivId.type=\"hidden\";columnWithDivId.value=divId;columns.push(columnWithDivId);var idCol={};idCol.name=\"id\";idCol.type=\"hidden\";idCol.tableCaption=tableCaption;columns.push(idCol);}\nfunction SelectGridColumn(columnName,labelText,options,codeTableName){var that=this;this.columnName=columnName;this.labelText=charEntitiesToUnicode(labelText);this.controlType=\"select\";this.readOnly=false;this.dataType=eapp.webforms.dataTypes.lov;if(options!==undefined){this.options=options;}\nif(codeTableName!==undefined){this.codeTableName=codeTableName;}\nthis.toString=function(){var obj={};obj.columnName=that.columnName;obj.labelText=that.labelText;obj.controlType=that.controlType;obj.readOnly=that.readOnly;obj.dataType=that.dataType;obj.options=that.options;obj.codeTableName=that.codeTableName;return obj;};}\nfunction TextGridColumn(columnName,labelText,dataType,readOnly,size,codeTableName){var that=this;this.columnName=columnName;this.labelText=charEntitiesToUnicode(labelText);this.controlType=\"text\";this.readOnly=readOnly;this.dataType=dataType;this.size=size;if(codeTableName!==undefined){this.codeTableName=codeTableName;}\nthis.toString=function(){var obj={};obj.columnName=that.columnName;obj.labelText=that.labelText;obj.size=that.size;obj.controlType=that.controlType;obj.readOnly=that.readOnly;obj.dataType=that.dataType;obj.codeTableName=that.codeTableName;return obj;};}\nfunction Field(error){var that=this;var fieldId=error.field,dashIndex=error.field.lastIndexOf(\"_\");if(dashIndex>0){fieldId=error.field.substr(0,dashIndex);}\nthis.uniqueId=\"-1\";this.fieldId=fieldId;this.path=error.objectName;this.fieldName=fieldId;this.fieldNameWithUniqueId=this.fieldName;this.fullFieldName=\"\";this.fullFieldNameWithUniqueId=\"\";this.fieldIdWithUniqueId=fieldId;this.rowNumber=-1;this.errorCode=error.code;this.errorMessage=error.message;this.ignoreError=error.ignoreError;if(this.path!==\"\"){this.fullFieldName=this.path+\".\"+this.fieldName;}\nif(dashIndex>0){this.rowNumber=error.rowNumber;this.uniqueId=error.field.substr(dashIndex+1);this.fullFieldNameWithUniqueId=this.fullFieldName+\"_\"+this.uniqueId;this.fieldNameWithUniqueId=this.fieldNameWithUniqueId+\"_\"+this.uniqueId;this.fieldIdWithUniqueId=this.fieldIdWithUniqueId+\"_\"+this.uniqueId;}else{}\nif(isDateField(this.fieldName)){this.fullFieldName=this.fullFieldName+\".year\";this.fieldId=this.fieldId+\"-year\";}\nthis.toString=function(){var obj={};obj.fieldId=that.fieldId;obj.path=that.path;obj.fieldName=that.fieldName;obj.fullFieldName=that.fullFieldName;obj.rowNumber=that.rowNumber;obj.fieldNameWithUniqueId=that.fieldNameWithUniqueId;obj.fullFieldNameWithUniqueId=that.fullFieldNameWithUniqueId;obj.fieldIdWithUniqueId=that.fieldIdWithUniqueId;obj.errorCode=that.errorCode;obj.ignoreError=that.ignoreError;obj.errorMessage=that.message;return obj;};}\nfunction HiddenGridColumn(columnName,labelText,dataType,codeTableName){var that=this;this.columnName=columnName;this.labelText=charEntitiesToUnicode(labelText);this.controlType=\"text\";this.invisible=true;this.readOnly=true;this.dataType=dataType;if(arguments.length===3){this.codeTableName=codeTableName;}\nthis.toString=function(){var obj={};obj.columnName=that.columnName;obj.labelText=that.labelText;obj.controlType=that.controlType;obj.readOnly=that.readOnly;obj.dataType=that.dataType;obj.codeTableName=that.codeTableName;return obj;};}\nfunction initGridWithData(gridControl,columns,initData){if(initData&&initData!==null&&initData.length>0){gridControl.appendGrid('appendRow',initData.length);var initDatalnt=initData.length;var colCount=columns.length;var dictionary=eapp.webforms.dictionary;for(var i=0;i<initDatalnt;i++){for(var ii=0;ii<colCount;ii++){var value;value=getObjFieldValue(columns[ii].name,initData[i]);setGridColumnWithValue(columns[ii],value,gridControl,i,dictionary);}}}}\nfunction setGridColumnWithValue(column,fieldValue,gridControl,rowIndex,dictionary){if(!gridControl.appendGrid('isReady')){return;}\nvar dataTypes=eapp.webforms.dataTypes;if(fieldValue===undefined&&column.ctrlAttr!==null&&column.ctrlAttr[\"data-dataType\"]!=dataTypes.lovList){return;}\nif(column.name===\"selected\"){gridControl.appendGrid('setCtrlValue',column.name,rowIndex,fieldValue);return;}\nif(column.ctrlAttr===null){return;}\nvar ctrlDataType=column.ctrlAttr[\"data-dataType\"];var date;if(ctrlDataType==dataTypes.date){date=getWebFormDateAsString(fieldValue,false);gridControl.appendGrid('setCtrlValue',column.name,rowIndex,date);}else if(ctrlDataType==dataTypes.fuzzyDate){date=getWebFormDateAsString(fieldValue,true);gridControl.appendGrid('setCtrlValue',column.name,rowIndex,date);}else if(ctrlDataType==dataTypes.text){gridControl.appendGrid('setCtrlValue',column.name,rowIndex,fieldValue);}else if(ctrlDataType==dataTypes.lov){var codeTableName=column.ctrlAttr[\"data-codeTableName\"];if(codeTableName&&codeTableName!==null&&codeTableName!==\"\"){var list=dictionary[codeTableName];var lovText=getLovText(list,fieldValue.lovId);gridControl.appendGrid('setCtrlValue',column.name,rowIndex,lovText);}\nvar cellCtrl=gridControl.appendGrid('getCellCtrl',column.name,rowIndex);if(cellCtrl!==null){cellCtrl.setAttribute(\"data-lovid\",fieldValue.lovId);}\nif(column.options){updateOptions(gridControl,fieldValue,column.name,rowIndex);}}else if(ctrlDataType==dataTypes.boolLov){gridControl.appendGrid('setCtrlValue',column.name,rowIndex,fieldValue.selected);}else if(ctrlDataType==dataTypes.bool){gridControl.appendGrid('setCtrlValue',column.name,rowIndex,fieldValue);}}\nfunction getLovText(list,lovId){if(list!==undefined){for(var i=0,il=list.length;i<il;i++){if(list[i].lovId==lovId){return getLocalizedDescription(list[i]);}}}\nreturn\"\";}\nfunction getObjFieldValue(fullFieldPath,obj){var splits=fullFieldPath.split('.');var fieldName=splits.pop();var len=splits.length;var ii=1;var i=splits[0];var childObj;while((childObj=obj[i])&&ii<len){i=splits[ii];ii+=1;}\nif(childObj){return childObj[fieldName];}\nreturn obj[fieldName];}\nfunction getData(){var dataObj={};var properties=getElement(\"#webForm .formProperty\");if(properties&&properties.length>0){buildDataObject(properties.serializeArray(),dataObj);}\nvar elements=getAllFormControls(\"webForm\").not(\".ignore\");if(elements&&elements.length>0){var ary=[];$.each(elements,function(index,value){var obj={name:value.name,value:value.value.trim(),id:value.id,type:value.type};if(value.type=='checkbox'){obj.checked=value.checked;}else if(value.type=='select-one'){obj.isFuzzy=$(value).hasClass(\"fuzzy-date\");}\nary.push(obj);});buildDataObject(ary,dataObj);}\ngetGridData(dataObj);return dataObj;}\nfunction buildDataObject(elements,dataObj){var lnt=elements.length;for(var a=0;a<lnt;a++){var element=elements[a],name=element.name;if(name===\"\")\ncontinue;var value=element.value;if(name.indexOf('reenterPrCardNumber')>=0){continue;}else if(name.indexOf('.')>0){getObjectValue(name,value,dataObj);}else{if((element.type&&element.type=='select-one')||isSelectionField(name)){setSelectedValue(name,value,dataObj);}else{if(value.indexOf('{')>=0){dataObj[name]=JSON.parse(value);}else{dataObj[name]=value;}}}}}\nfunction addToJsonObject(fieldPath,fieldValue,modelObj,cellControl){var dataType=cellControl.getAttribute(\"data-datatype\");var lovId=cellControl.getAttribute(\"data-lovid\");if(dataType==eapp.webforms.dataTypes.lov&&cellControl.type!=\"select-one\"){fieldValue=lovId;}\nvar fieldName=getPropertyName(fieldPath);if(fieldPath.indexOf(\".\")>0){var field=createObject(fieldPath,modelObj);field[fieldName]=getFieldValue(dataType,fieldValue);}else{modelObj[fieldName]=getFieldValue(dataType,fieldValue);}}\nfunction getFieldValue(dataType,fieldValue){var dataTypes=eapp.webforms.dataTypes;if(dataType==dataTypes.text){return(fieldValue+\"\").trim();}else if(dataType==dataTypes.lov){return new Lov(fieldValue,true);}else if(dataType==dataTypes.bool){return fieldValue;}else if(dataType==dataTypes.boolLov){return new Lov(-1,fieldValue===\"true\"?true:false);}else if(dataType==dataTypes.lovList){return new Lov(fieldValue,true);}else if(dataType==dataTypes.date){return getWebFormDate(fieldValue,false);}else if(dataType==dataTypes.fuzzyDate){return getWebFormDate(fieldValue,true);}\nreturn null;}\nfunction createObject(fieldPath,dataObj){var obj={};var splittedFieldPath=fieldPath.split(\".\");var objectName=splittedFieldPath[0];if(dataObj[objectName]===undefined){dataObj[objectName]=obj;}else{obj=dataObj[objectName];}\nvar lnt=splittedFieldPath.length-1;for(var i=1;i<lnt;i++){objectName=splittedFieldPath[i];if(obj[objectName]===undefined){obj[objectName]={};if(i<=lnt-1){obj=obj[objectName];}}else{obj=obj[objectName];}}\nreturn obj;}\nfunction getObjectValue(fieldPath,fieldValue,dataObj){var fieldName=getPropertyName(fieldPath);if(fieldName===null)\nreturn;var obj=createObject(fieldPath,dataObj);if(isSelectionField(fieldPath)){if(!isNaN(fieldValue)){var selectedValue={};selectedValue=new Lov(fieldValue,true);obj[fieldName]=selectedValue;}}else if(isCheckboxField(fieldPath)){var lov;if(fieldValue===\"\")\nfieldValue=-1;var isArray=isElementArrayByName(fieldPath);if(isArray){lov=new Lov(fieldValue,isSelectionElementChecked($(\"#\"+fieldName+\"-\"+fieldValue)));}else{lov=new Lov(fieldValue,isSelectionElementChecked($(\"input[name='\"+fieldPath+\"']\")));}\nif(obj[fieldName]===undefined){if(isArray){obj[fieldName]=[];}else{obj[fieldName]={};}}\nif(isArray){var len=obj[fieldName].length;obj[fieldName][len]=lov;}else{obj[fieldName]=lov;}\nreturn;}else{obj[fieldName]=fieldValue;}}\nfunction getElementType(element){if(element)\nreturn element.prop(\"type\");}\nfunction getElementId(element){if(element)\nreturn element.prop(\"id\");}\nfunction isSelectionElementChecked(element){if(element)\nreturn element.is(\":checked\");}\nfunction isElementArray(elementName){if(elementName){var index=elementName.indexOf(\"-\");if(index>0){var arrayName=elementName.substr(0,index);var e=getElement(\".isArray-\"+arrayName);return(e&&e.length>0);}else\nreturn false;}else\nreturn false;}\nfunction isElementArrayByName(elementName){var e=getElement(\"input[name='\"+elementName+\"']\");return(e&&e.length>1);}\nfunction setSelectedValue(fieldName,fieldValue,dataObj){if(isNaN(fieldValue)){return;}\nvar selectedValue={};selectedValue=new Lov(fieldValue,true);dataObj[fieldName]=selectedValue;}\nfunction isSelectionField(fieldName){return isFieldType(fieldName,\"select-one\");}\nfunction isCheckboxField(fieldName){return isFieldType(fieldName,\"checkbox\");}\nfunction isFieldType(fieldName,fieldType){return(getElementType(getElement(\"[name='\"+fieldName+\"']\"))==fieldType)||(getElementType(getElement(\"#\"+fieldName))==fieldType);}\nfunction getPropertyName(name){var splittedPropAr=name.split(\".\");return splittedPropAr[splittedPropAr.length-1];}\nfunction clearGrid(id){var grid=getElement('#'+id);if(grid&&grid.length==1){var rowCount=grid.appendGrid('getRowCount');for(var i=0;i<rowCount;i++){grid.appendGrid('removeRow',i);}}}\nfunction cleanJQuerySelection(id){return id.replace(/[^\\w\\s]/gi,'\\\\$&');}\nfunction subscribeToProvinceChange(provinceId,cityId,cityValueId){$('#webForm').on('change','#'+cleanJQuerySelection(provinceId),function(e){if(e&&e.currentTarget){if(e.currentTarget.value==-1){getElement(\"#\"+cityId).empty().append('<option value=\"-1\"></option>');}else{populateCityListByProvinceId(e.currentTarget.value,cleanJQuerySelection(cityId),cityValueId);}}});}\nfunction subscribeToIsOngoingDate(subscribeId,fieldName){subscribeToElementChange(subscribeId,function(event){var config={};config[\"false\"]=fieldName;if(event.currentTarget.checked==true){clearElement(fieldName+\"-year\");clearElement(fieldName+\"-month\");clearElement(fieldName+\"-day\");}\nshowNext(fieldName+\"Content\",event.currentTarget.id,config);});}\nfunction subscribeToElementChange(elementId,callback){$('#webForm').on('change','#'+cleanJQuerySelection(elementId),function(e){if(e&&e.currentTarget){callback(e);}});}\nfunction subscribeToYesElement(id){subscribeToElementChange(id,function(event){var config={};config[eapp.webforms.constants.yesNo.yes]=id;showNext(id+\"Content\",id,config);});}\nfunction populateSelectList(el,lovList,selectedLovId){if(!lovList){return;}\nif(el===undefined||el.type!==\"select-one\"){if(console)\nconsole.log(\"Error. el is not a select control\");return;}\nvar fragment=document.createDocumentFragment(),option,selectedIndex=0;if(lovList[0].lovId!==-1){option=document.createElement(\"OPTION\");option.value=-1;fragment.appendChild(option);}\nfor(var i=0,il=lovList.length;i<il;i++){option=document.createElement(\"OPTION\");option.value=lovList[i].lovId;option.text=getLocalizedDescription(lovList[i]);if(lovList[i].lovId===selectedLovId){selectedIndex=(i+1);}\nfragment.appendChild(option);}\nel.innerHTML=\"\";el.appendChild(fragment.cloneNode(true));if(selectedIndex>0&&el.childNodes&&el.childNodes.length>0){el.childNodes[selectedIndex].selected=true;}}\nfunction fetchCityListForProvince(provinceId,callback,config){if(typeof provinceId===\"undefined\")\nreturn;if(provinceId===0)\nreturn;if(!callback||!jQuery.isFunction(callback)){return;}\nvar provinces=eapp.webforms.cache.provinces;var cityList;$.each(provinces,function(){if(this.id==provinceId){cityList=this.list;return false;}});if(cityList&&cityList.length>0){callback(cityList,config);}else{$.ajax({url:\"/eapp/cityListByProvince/\"+provinceId,type:\"GET\",cache:false,dataType:\"json\",beforeSend:function(xhr){xhr.setRequestHeader(\"Accept\",\"application/json\");xhr.setRequestHeader(\"Content-Type\",\"application/json\");},success:function(responseObject){var province={};province.id=\"\"+provinceId;province.list=responseObject;eapp.webforms.cache.provinces.push(province);callback(responseObject,config);}});}}\nfunction populateCityListByProvinceId(provinceId,outputDivId,selectedCityId){if(typeof provinceId===\"undefined\")\nreturn;if(provinceId===0)\nreturn;var el=getElement(\"#\"+outputDivId);if(el.length===0)\nreturn;fetchCityListForProvince(provinceId,function(list){populateSelectList(el[0],list,selectedCityId,outputDivId);});}\nfunction showNextQuestions(url,divName,panelId,outputDivId,completionCallback){if(!url){url=\"/eapp/showNext.do\";}\nvar dataObj=getData();var jsonData=JSON.stringify(dataObj);$.ajax({url:url,data:jsonData,type:\"POST\",dataType:\"json\",beforeSend:function(xhr){xhr.setRequestHeader(\"Accept\",\"application/json\");xhr.setRequestHeader(\"Content-Type\",\"application/json\");},success:function(responseObject){removeFixedErrors(responseObject.errors);var errorsFlags={};if(url.indexOf(\"showNext.do\")>0){if(responseObject.errors!==null){errorsFlags=addErrors(divName,responseObject.errors,false);}\nif(!errorsFlags.nonMandatoryErrors){if(panelId!==null){getElement(\"#accordion\").accordion({active:panelId});webFormAccessibility.focusOnFirstTabbableElement(panelId);addCompletionStatus(responseObject.webForm.webFormStatus,errorsFlags,panelId-1);}else{showHTML(responseObject,outputDivId);}}else{if(panelId!==null){disable(panelId);addCompletionStatus(responseObject.webForm.webFormStatus,errorsFlags,panelId-1);}}}else if(url.indexOf(\"submitWebForm.do\")>0){errorsFlags={};if(responseObject.errors!==null){errorsFlags=addErrors(\"accordion\",responseObject.errors,false);if(errorsFlags.nonMandatoryErrors){return;}}\nwindow.location.href=\"/eapp/applicationChecklist.do\";}\nif((typeof completionCallback!==\"undefined\")&&jQuery.isFunction(completionCallback)){completionCallback();}\nsetNextAction(\"\");}});}\nfunction disable(panelId){var allAccordionHeaders=$(\".ui-accordion-header\");var lnt=allAccordionHeaders.length;for(var i=0;i<lnt;i++){var id=allAccordionHeaders[i].id,headerId=Number(id.substr(id.lastIndexOf(\"-\")+1));if(headerId>=panelId){$(\"#ui-accordion-accordion-header-\"+i).addClass(\"ui-state-disabled\");}}\ndisableSaveAndExit();}\nfunction addCompletionStatus(webFormStatus,errorsFlags,headerIndex){var statusText=eapp.webforms.status.text.notStarted;var statusTextComplete=eapp.webforms.status.text.complete;var statusTextInProgress=eapp.webforms.status.text.inProgress;var statusClass='eapp-status-not-started';if(webFormStatus!=\"form_status.not_started\"){var inProgress=errorsFlags.nonMandatoryErrors||errorsFlags.mandatoryErrors;statusText=inProgress?statusTextInProgress:statusTextComplete;statusClass=inProgress?'eapp-status-in-progress':'eapp-status-complete';}\nvar el='#ui-accordion-accordion-header-'+headerIndex;getElement(el+' .eapp-status-icon').remove();getElement(el+' .eapp-status-text').remove();getElement(el).append('<i class=\"icon eapp-status-icon\" aria-hidden=\"true\"></i><span class=\"eapp-status-text wb-inv\" role=\"status\">'+'Status: '+statusText+'</span>');getElement(el).removeClass('eapp-status-not-started eapp-status-in-progress eapp-status-complete').addClass(statusClass);}\nfunction loadData(webFormId,section){$.ajax({url:\"/eapp/loadData.do?webFormId=\"+webFormId+\"&section=\"+section,type:\"GET\",cache:false,dataType:\"json\",beforeSend:function(xhr){xhr.setRequestHeader(\"Accept\",\"application/json\");xhr.setRequestHeader(\"Content-Type\",\"application/json\");},success:function(responseObject){if(responseObject.dictionary){eapp.webforms.dictionary=responseObject.dictionary;}\nif(responseObject.webForm){if((typeof initialize!==\"undefined\")&&jQuery.isFunction(initialize)){initialize(webFormId,responseObject.webForm);}\naddPanelCompletionStatus(responseObject.webForm.webFormStatus);}}});}\nfunction isFieldHidden(id){if(typeof id==='string'){return $(\"#\"+id).is(\":hidden\");}else{return undefined;}}\nfunction setFocus(errorLinkId){var id='';if(typeof errorLinkId!=='string'||errorLinkId.length<7)\nreturn;var iError=errorLinkId.indexOf('-error');if(iError===-1)\nreturn;var fieldId=errorLinkId.slice(0,iError);var iUnderscore=fieldId.lastIndexOf('_');if(iUnderscore!==-1){var sIndex=fieldId.substr(iUnderscore+1);if(sIndex.length>0&&$.isNumeric(sIndex)){fieldId=fieldId.slice(0,iUnderscore);}}\nid='';var tableDescription=$(\"#table-description-\"+fieldId);if(tableDescription.length===1){id='table-description-'+fieldId;}else if(tableDescription.length===0){var field=$(\"input[id='\"+fieldId+\"'], textarea[id='\"+fieldId+\"'], select[id='\"+fieldId+\"'], div[id='\"+fieldId+\"']\");if(field.length===1)\nid=fieldId;var qa=$(field).parents(\".eapp-question-and-answer\");if($(qa).length===1){$(qa).attr(\"tabindex\",\"-1\");id=$(qa).attr(\"id\");if(typeof id!=='string'||id.length===0){id='eapp-question-and-answer-'+fieldId;$(qa).attr(\"id\",id);}}\nif($(field).is(\"select\")&&$(field).length===1){var dateContainer=$(field).parents(\".question-date\");if($(dateContainer).length===1){var idDescription=$(dateContainer).attr(\"aria-describedby\");if(typeof idDescription==='string'&&idDescription.length>0)\nid=idDescription;}}}\nif(id.length===0)\nreturn;var attrWithPanelId=$(\"#\"+id).closest(\"div[role='tabpanel']\").attr(\"aria-labelledby\");attrWithPanelId=$.trim(attrWithPanelId||'');var panelId='';var activePanelId='';if(attrWithPanelId.length>0){if(attrWithPanelId.indexOf('ui-accordion-accordion-header-')===0)\npanelId=$.trim(attrWithPanelId.replace('ui-accordion-accordion-header-',''));var activePanelId=$.trim(activePanel());}\nif(activePanelId===panelId){if(isFieldHidden(id)!==true){$(\"#\"+id).focus();$(window).scrollTop($(\"#\"+id).offset().top);}\n$(\"#accordion\").accordion(\"refresh\");}else{$(\"#accordion\").off(\"accordionactivate\");$(\"#accordion\").one(\"accordionactivate\",function(event,ui){if(isFieldHidden(id)!==true){$(\"#\"+id).focus();$(window).scrollTop($(\"#\"+id).offset().top);}\n$(\"#accordion\").on(\"accordionactivate\",function(event,ui){$(window).scrollTop(ui.newHeader.offset().top);});});$(\"#accordion\").accordion({active:Number(panelId)});$(\"#accordion\").accordion(\"refresh\");}}\nfunction linkTextContents(sel){var $el=$(sel),linkText=\"\";var $linkText=$el.contents().filter(function(index){return(this.nodeType===Node.TEXT_NODE||(this.nodeType===Node.ELEMENT_NODE&&$(this).is(\"p, span, strong, em\")));});for(var i=0,len=$linkText.length;i<len;i++){if(i>0&&$linkText[i].nodeType!==Node.TEXT_NODE)\nlinkText+=\" \";linkText+=$($linkText[i]).text().replace(/^\\s+|\\s+$/gm,'');}\nlinkText=linkText.replace(/[\\t\\r\\n\\f]/g,'');linkText=trimFinalColon(linkText);return linkText;}\nfunction trimFinalColon(linkText){var s=linkText.replace(/^\\s+|\\s+$/gm,'');var iColon=s.lastIndexOf(\":\");if(iColon!==-1&&(iColon===s.length-1))\ns=s.slice(0,iColon);return s.replace(/^\\s+|\\s+$/gm,'');}\nfunction addErrors(divId,errors,checkFieldCompletion){if(errors===null)\nreturn{};var panelControls=getAllFormControls(divId);var errorsFlags={};errorsFlags.nonMandatoryErrors=false;errorsFlags.mandatoryErrors=false;var $errorsList=getElement(\"#form-error-list\");var len=errors.length;for(var a=0;a<len;a++){var field=new Field(errors[a]);if(field.errorCode===\"error.DateGap\"&&checkFieldCompletion!=true){continue;}\nvar $failingControl=findFailingFormControl(field,panelControls);if($failingControl==null)\ncontinue;if(!checkFieldCompletion===true){if(field.ignoreError){errorsFlags.mandatoryErrors=true;continue;}}\nerrorsFlags.nonMandatoryErrors=true;var $fieldLabelOrDescription=getFieldLabelOrDescription($failingControl);if($fieldLabelOrDescription!=null){addErrorClass($fieldLabelOrDescription);addErrorIndicatorImage($fieldLabelOrDescription);addErrorMessage($fieldLabelOrDescription,field,$errorsList);}}\nif(errorsFlags.nonMandatoryErrors===true)\nshowValidationErrorsDiv();hideRequiredFieldsStatusDiv();eappAddIcons();updateErrorAttributesFields(\"question-label\");updateErrorAttributesFields(\"question-description\");return errorsFlags;}\nfunction getFieldLabelOrDescriptionForFieldId(fieldId,questionClass){var el,$el;if(questionClass===\"question-label\"){el=\"label[for='\"+fieldId+\"']\";}else if(questionClass===\"question-description\"){el=\"#question-description-\"+fieldId;}else if(questionClass===\"table-description\"){el=\"#table-description-\"+fieldId;}else if(questionClass===\"grid-control\"){el=\"#\"+fieldId;}\n$el=$(el);return $el;}\nfunction removeYearSuffix(id){if(id==undefined)\nreturn id;var indexOfYear=id.indexOf(\"-year\");if(indexOfYear>0){return id.substr(0,indexOfYear);}else{return id;}}\nfunction getFieldLabelOrDescription(control){var el,$el;if(control.hasClass(\"grid-control\")){return control;}\nel=\"label[for='\"+control.attr(\"id\")+\"']\";$el=$(el);if($el.length){return $el;}\nvar dateId=removeYearSuffix(control.attr(\"id\"));el=\"#question-description-\"+dateId;$el=$(el);if($el.length){return $el;}\nel=\"#table-description-\"+control.attr(\"id\");$el=$(el);if($el.length){return $el;}\nreturn null;}\nfunction addErrorClass(el,field){if(el.length){if(el.hasClass(\"question-description\")){el.removeClass(\"question-description\").addClass(\"question-description-error\");}else if(el.hasClass(\"table-description\")){el.removeClass(\"table-description\").addClass(\"table-description-error\");}else if(el.hasClass(\"grid-control\")){el.removeClass(\"grid-control\").addClass(\"grid-control-error\");}else if(el.hasClass(\"question-label\")){el.removeClass(\"question-label\").addClass(\"question-label-error\");}}}\nfunction addErrorIndicatorImage(el){var errorIndicatorClass=\"question-error-indicator\";if(el.hasClass(\"table-description-error\")){errorIndicatorClass=\"table-error-indicator\";}else if(el.hasClass(\"question-label-error\")){errorIndicatorClass=\"question-error-indicator\";}else if(el.hasClass(\"grid-control-error\")){errorIndicatorClass=\"table-error-indicator\";var tableSel=\"#table-description-\"+el.attr(\"data-tableDescription\");el=$(tableSel);}\nif(el.children().hasClass(errorIndicatorClass)){return;}\nvar errorIndicatorAlt=eapp.webforms.locale.errorField;$(el).prepend(\"<img class='\"+errorIndicatorClass+\"' \"+\"alt='\"+errorIndicatorAlt+\"' src='/eapp/resource/images/question-error-indicator.png' \"+\"width='16' height='16'></img>\");}\nfunction addErrorMessage(el,field,$errorsList){var href=field.fieldId,linkId=field.fieldId+\"-error\",linkText=linkTextContents(el),message=field.errorMessage;if(el.hasClass(\"grid-control-error\")){var fieldDisplay=el.attr(\"data-display\");var tableCaption=el.attr(\"data-tableCaption\");var tableDescription=el.attr(\"data-tableDescription\");var rowNumber=field.rowNumber;linkId=field.fieldIdWithUniqueId+\"-error\";href=\"table-description-\"+tableDescription;linkText=eapp.webforms.locale.table+eapp.webforms.locale.colon+\" \"+tableCaption;message=eapp.webforms.locale.row+eapp.webforms.locale.colon+\" \"+rowNumber+\" \"+eapp.webforms.locale.field+eapp.webforms.locale.colon+\" \"+fieldDisplay+\" \"+field.errorMessage;}else if(el.hasClass(\"table-description-error\")){href=\"table-description-\"+field.fieldId;}else if(el.hasClass(\"question-description-error\")){var indexOfYear=field.fieldId.indexOf(\"-year\");if(indexOfYear>0){href=\"question-description-\"+field.fieldId.substr(0,indexOfYear);}else{href=\"question-description-\"+field.fieldId;}}\nvar $errorLink=$(\"#\"+linkId);if($errorLink){if($errorLink.attr(\"data-errorCode\")===field.errorCode)\nreturn;}\nmessage=\"<li><span class='form-error-prefix'>\"+eapp.webforms.locale.prefixErrorDescription+\"</span> \"+\"<span class='form-error'>\"+\"<a id='\"+linkId+\"' \"+\"data-errorCode='\"+field.errorCode+\"' \"+\"onclick='javascript:return setFocus(this.id)' href='#\"+href+\"'>\"+linkText+\"</a>\"+eapp.webforms.locale.colon+\" \"+message+\"</span></li>\";$errorsList.append(message);}\nfunction isDateField(field){if(field)\nreturn(field.toLowerCase().indexOf(\"date\")>=0);else\nreturn false;}\nfunction hasClass(control,className){var len=control.classList.length;for(var ii=0;ii<len;ii++){if(control.classList[ii]===className){return true;}}\nreturn false;}\nfunction findFailingFormControl(field,panelControls){var nextAction=getElement(\"#nextAction\").val();var isAppendSaveRow=nextAction.indexOf(\"_append_\")>0;if(panelControls){var lnt=panelControls.length;for(var i=0;i<lnt;i++){var control=panelControls[i];if(!isAppendSaveRow&&field.rowNumber!=-1&&!hasClass(control,\"grid-control\"))\ncontinue;if(control.id===field.fieldId||(control.name!=\"\"&&control.name===field.fullFieldName)||(control.name!=\"\"&&control.name===field.fullFieldNameWithUniqueId)){return getElement(\"#\"+control.id);}}}\nreturn null;}\nfunction addReadOnlyAttribute(panelControls){if(panelControls){var lnt=panelControls.length;for(var i=0;i<lnt;i++){var el=panelControls[i];if(!hasClass(el,\"btn-next\")&&!hasClass(el,\"btn-previous\")&&el.getAttribute(\"title\")!=\"Modify\"){el.setAttribute(\"readonly\",true);el.setAttribute(\"disabled\",true);}\nif(el.getAttribute(\"title\")===\"Modify\"){}}}}\nfunction removeFixedErrors(errors){if(errors===null||errors.length===0){hideValidationErrorsDiv();}\nremoveLabelErrors(errors);removeQuestionDescriptionErrors(errors);removeTableDescriptionErrors(errors);removeGridControlErrors(errors);eappAddIcons();updateErrorAttributesFields(\"question-label\");updateErrorAttributesFields(\"question-description\");if($(\".question-label-error\").length===0&&$(\".question-description-error\").length===0&&$(\".table-description-error\").length===0&&$(\".grid-control-error\").length===0){hideValidationErrorsDiv();}\nenable();}\nfunction removeLabelErrors(errors){var $labelErrors=$(\".question-label-error\"),len=$labelErrors.length;for(var i=0;i<len;i++){var fieldId=$labelErrors[i].getAttribute(\"for\");if(fieldId!=null){if(isFieldFixed(errors,fieldId)){removeErrorMessages(fieldId,\"question-label\");}}}}\nfunction removeQuestionDescriptionErrors(errors){var $descriptionErrors=$(\".question-description-error\"),len=$descriptionErrors.length;for(var i=0;i<len;i++){var fieldId=$descriptionErrors[i].id;if(fieldId.length!==0&&fieldId.substr(0,21)===\"question-description-\"){fieldId=fieldId.substr(21);if(isFieldFixed(errors,fieldId)){removeErrorMessages(fieldId,\"question-description\");}}}}\nfunction removeTableDescriptionErrors(errors){var $tableDescriptionErrors=$(\".table-description-error\"),len=$tableDescriptionErrors.length;for(var i=0;i<len;i++){var fieldId=$tableDescriptionErrors[i].id;if(fieldId.length!==0&&fieldId.substr(0,18)===\"table-description-\"){fieldId=fieldId.substr(18);if(isFieldFixed(errors,fieldId)){removeErrorMessages(fieldId,\"table-description\");}}}}\nfunction removeGridControlErrors(errors){var $gridControlErrors=$(\".grid-control-error\"),len=$gridControlErrors.length;for(var i=0;i<len;i++){var fieldId=$gridControlErrors[i].id;var arr=fieldId.split(\"_\");var arrLength=arr.length;var href=arr[arrLength-2]+\"_\"+arr[arrLength-1];if(isFieldFixed(errors,href)){removeErrorMessages(fieldId,\"grid-control\");}}}\nfunction enable(){var i,$accordionHeaders=$(\".ui-accordion-header\"),len=$accordionHeaders.length;for(i=0;i<len;i++){getElement(\"#ui-accordion-accordion-header-\"+i).removeClass(\"ui-state-disabled\");}\nenableSaveAndExit();}\nfunction removeErrorMessages(fieldId,questionClass){var field=getFieldLabelOrDescriptionForFieldId(fieldId,questionClass);if(field!=null){removeErrorClass(field,questionClass);removeErrorIndicatorImage(field,questionClass);removeErrorMessageLink(fieldId,questionClass);}}\nfunction removeErrorIndicatorImage(field,questionClass){var $el=field;if($el.length){if(questionClass===\"grid-control\")\n$el=$(\"#table-description-\"+$el.attr(\"data-tableDescription\"));if(questionClass===\"question-label\"||questionClass===\"question-description\"){$el.children(\".question-error-indicator\").remove();$el.children(\".question-error-indicator-text\").remove();}else if(questionClass===\"grid-control\"||questionClass===\"table-description\"){$el.children(\".table-error-indicator\").remove();$el.children(\".table-error-indicator-text\").remove();}}}\nfunction removeErrorClass(field,questionClass){if(field.length){field.removeClass(questionClass+\"-error\").addClass(questionClass);}}\nfunction removeErrorMessageLink(fieldId,questionClass){var el,$el;if(questionClass===\"question-label\"){el=\"a[href='#\"+fieldId+\"']\";}else if(questionClass===\"question-description\"){el=\"a[href='#question-description-\"+fieldId+\"']\";}else if(questionClass===\"table-description\"){el=\"a[href='#table-description-\"+fieldId+\"']\";}else if(questionClass===\"grid-control\"){var arr=fieldId.split(\"_\");var fieldIdWithoutPath=fieldId;if(arr.length>1){fieldIdWithoutPath=arr[arr.length-2]+\"_\"+arr[arr.length-1];}\nel=\"a[id='\"+fieldIdWithoutPath+\"-error']\";}\n$el=$(el);if($el.length){$el.closest(\"li\").remove();}}\nfunction isFieldFixed(errors,fieldId){if(errors===null)\nreturn true;var $errorCode,len=errors.length;if(fieldId.toLowerCase().indexOf(\"date\")>=0){$errorLink=$(\"#\"+fieldId+\"-year\"+\"-error\");}else{$errorLink=$(\"#\"+fieldId+\"-error\");}\nif($errorLink){$errorCode=$errorLink.attr(\"data-errorCode\");}\nfor(var i=0;i<len;i++){if(fieldId===errors[i].field.split(\"_\")[0]&&errors[i].code===$errorCode)\nreturn false;}\nreturn true;}\nfunction showHTML(responseObject,outputDivId){if(responseObject.html!=null){getElement(\"#\"+outputDivId).html(responseObject.html);}\nif((typeof updateUI!==\"undefined\")&&jQuery.isFunction(updateUI)){config={templateName:outputDivId};updateUI(responseObject.webForm,config);}}\nfunction showNext(outputDivId,selectedElementId,templateMap,completionCallback){var selectedElement=getElement(\"#\"+selectedElementId);if(selectedElement&&selectedElement.length>0){var selectedCodeValue;if(getElementType(selectedElement)=='checkbox'){selectedCodeValue=isSelectionElementChecked(selectedElement);}else{selectedCodeValue=selectedElement.val();}\nvar nextAction;if(templateMap){var template=templateMap[selectedCodeValue];if(template){nextAction=template;}else{nextAction=templateMap[eapp.webforms.constants.subscribeToAllOtherValues];}}else{if(eapp.webforms.constants.yesNo.yes==selectedCodeValue){nextAction=outputDivId;}}\nif(nextAction!==undefined){setNextAction(nextAction);showNextQuestions(\"/eapp/showNext.do\",\"accordion\",null,outputDivId,completionCallback);}else{clearElement(outputDivId);}}else{clearElement(outputDivId);}}\nfunction clearElement(elementId){setElement(elementId,\"\");}\nfunction setElement(elementId,content){getElement(\"#\"+elementId).html(content);}\nfunction disableValidation(){getElement(\"#validate\").val(\"false\");}\nfunction enableValidation(){getElement(\"#validate\").val(\"true\");}\nfunction setNextAction(value){getElement(\"#nextAction\").val(value);}\nfunction showLanguages(selectedValue){var yesNo=eapp.webforms.constants.yesNo;if(yesNo.yes==selectedValue){setNextAction(\"languageDisorders\");getElement(\"#proofOfLanguage\").html(\"\");getElement(\"#consent\").html(\"\");showNextQuestions();}else if(yesNo.no==selectedValue){setNextAction(\"proofOfLanguage\");getElement(\"#languageDisorders\").html(\"\");showNextQuestions();}else{getElement(\"#\"+divId).html(\"\");}}\nfunction showNextTab(panelId,divName){hideRequiredFieldsStatusDiv();if($(\".help-helptip-content\").length>0||$(\".glossary-helptip-content\").length>0){if(typeof theHelptip!=='undefined'&&theHelptip.initialized){theHelptip.remove();}}\nshowNextQuestions(\"/eapp/showNext.do\",divName,panelId);}\nfunction getAllFormControls(divName){if(!divName)\nreturn null;return getElement(\"#\"+divName+\" .form-control, #\"+divName+\" .question-checkbox\");}\nfunction getAllButtons(divName){return getElement(\"#\"+divName+\" .btn\");}\nfunction addPanelCompletionStatus(webFormStatus){var divs=$(\".ui-accordion-content\");$(divs).each(function(index){var divControls=getAllFormControls(this.id);var errorsFlags=findErrors(divControls);addCompletionStatus(webFormStatus,errorsFlags,index);makeDivContentReadOnly(divControls,this.id);});}\nfunction findErrors(panelControls){var errorsFlags={};errorsFlags.nonMandatoryErrors=false;errorsFlags.mandatoryErrors=false;var errors=eapp.webforms.errors;if(errors&&errors.length>0){for(var a=0;a<errors.length;a++){var field=new Field(errors[a]);if(findFailingFormControl(field,panelControls)===null)\ncontinue;if((errors[a].codes[0]==='error.MandatoryFields')){errorsFlags.mandatoryErrors=true;continue;}\nerrorsFlags.nonMandatoryErrors=true;}}\nreturn errorsFlags;}\nfunction initGridHeadings(id,tableCaption){var j,el=document.getElementById(id),theads=el.getElementsByTagName('thead');if(!theads[0])\nreturn;var tds=theads[0].getElementsByTagName('td'),row=document.createElement('tr'),len=tds.length,jlast=len-1;for(j=0;j<len;j+=1){var idTh=tds[j].id,classTh=tds[j].className,th=document.createElement('th');th.setAttribute('scope','col');if(idTh!=null)\nth.id=idTh;if(classTh!=null)\nth.className=classTh;if(j===jlast){th.appendChild(document.createTextNode(eapp.webforms.locale.action));}else{var s=charEntitiesToUnicode(tds[j].innerHTML);th.appendChild(document.createTextNode(s));}\nrow.appendChild(th);}\nwhile(theads[0].firstChild){theads[0].removeChild(theads[0].firstChild);}\ntheads[0].appendChild(row);var caption=document.createElement('caption');caption.appendChild(document.createTextNode(tableCaption));theads[0].parentNode.insertBefore(caption,theads[0]);return;}\nfunction submitWebForm(divId){setNextAction(divId);showNextQuestions(\"/eapp/submitWebForm.do\");}\nfunction getElement(selector){return $(selector);}\nfunction configureAccordions(){$(\"#accordion\").accordion({heightStyle:\"content\",header:\".eapp-accordion-header\",create:function(event,ui){$(\".ui-accordion-content\").addClass(\"eapp-accordion-panel\");},activate:function(event,ui){}});$(\"#accordion\").on(\"accordionactivate\",function(event,ui){$(window).scrollTop(ui.newHeader.offset().top);webFormAccessibility.focusOnFirstTabbableElement(\"\",ui.newPanel.attr(\"id\"));});}\nfunction activePanel(){var n=nAccordionPanels(\".eapp-accordion-panel\");return(n<0)?n:$(\"#accordion\").accordion(\"option\",\"active\");}\nfunction nAccordionPanels(selector){var accordionPanels=$(selector);return accordionPanels.length-1;}\nfunction initializeWebFormUI(webFormId,section){configureAccordions();if((typeof initializeUI!==\"undefined\")&&jQuery.isFunction(initializeUI)){initializeUI(webFormId,section);}}\nfunction isWebformQuestionEvent(event){if(event.target.className.indexOf('question-checkbox')>-1||event.target.className.indexOf('form-control')>-1)\nreturn true;else\nreturn false;}\nfunction detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');var trident=ua.indexOf('Trident/');if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10);}\nif(trident>0){var rv=ua.indexOf('rv:');return parseInt(ua.substring(rv+3,ua.indexOf('.',rv)),10);}\nreturn false;}\nfunction initializeConsoleIfRequired(){var method;var noop=function(){};var methods=['assert','clear','count','debug','dir','dirxml','error','exception','group','groupCollapsed','groupEnd','info','log','markTimeline','profile','profileEnd','table','time','timeEnd','timeStamp','trace','warn'];var length=methods.length;var console=(window.console=window.console||noop);while(length--){method=methods[length];if(!console[method]){console[method]=noop;}}}\nfunction hookAjaxRequests(){$(document).ajaxStart(onAjaxRequestsStart).ajaxStop(onAjaxRequestsCompleted).ajaxError(onAjaxRequestsError);$.ajaxSetup({statusCode:{401:function(err){if(console)\nconsole.warn('Login Failed.',err.responseJSON);}}});}\nfunction onAjaxRequestsError(event,jqxhr,settings,thrownError){if(console)\nconsole.warn(\"Communication error: \"+settings.url+\" [\"+thrownError+\"]\");}\nfunction onAjaxRequestsStart(){var overlay=eapp.webforms.overlay;overlay.requestsDone=false;overlay.startTime=Date.now();overlay.showTime=undefined;overlay.timeoutId=setTimeout(function(){if(!overlay.requestsDone){overlay.showTime=Date.now();overlay.timeoutId=undefined;showOverlay();}},(eapp.webforms.overlay.duration/3));}\nfunction onAjaxRequestsCompleted(){var overlay=eapp.webforms.overlay;if(overlay.timeoutId||overlay.showTime){if(overlay.showTime){var endTime=Date.now();var exposed=endTime-overlay.showTime;if(exposed<overlay.duration){setTimeout(function(){hideOverlay();},overlay.duration-exposed);}else{hideOverlay();}}else{hideOverlay();}}else{overlay.requestsDone=true;hideOverlay();}}\nfunction hookAjaxPreFilter(){$.ajaxPrefilter(\"json\",function(options,originalOptions,jqXHR){var url=options.url;var hasParams=url.indexOf(\"?\")>0;var addLangParam=true;if(hasParams){if(url.indexOf(\"lang=\")>0){addLangParam=false;}}\nif(addLangParam){if(hasParams){url+=\"&\";}else{url+=\"?\";}\nurl+=\"lang=\"+eapp.webforms.locale.localeLanguage;options.url=url;}\nreturn options.dataType;});}\nfunction initializeNodeConstants(){if(!window.Node){var Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};}}\nfunction initializeWebForm(webFormId,section){if(!detectIE()){hookAjaxRequests();}\nhookAjaxPreFilter();initializeConsoleIfRequired();initializeNodeConstants();initializeWebFormUI(webFormId,section);loadData(webFormId,section);}\nfunction getPropertyNames(o){if(typeof o!=='object'||o===null){return[];}\nif(Object.keys){return Object.keys(o);}else{var k=[],p;for(p in o){if(Object.prototype.hasOwnProperty.call(o,p)){k.push(p);}}\nreturn k;}}\nfunction copyElementValueTo(sourceId,destinationId){if(sourceId&&destinationId&&sourceId.length>0&&destinationId.length>0){var sourceEl=getElement(\"#\"+sourceId),destinationEl=getElement(\"#\"+destinationId);if(sourceEl&&destinationEl)\ndestinationEl.val(sourceEl.val());}}\nfunction checkFieldCompletion(){setNextAction(\"checkFieldCompletion\");var dataObj=getData();var jsonData=JSON.stringify(dataObj);$.ajax({url:\"/eapp/checkFieldCompletion.do\",data:jsonData,type:\"POST\",dataType:\"json\",beforeSend:function(xhr){xhr.setRequestHeader(\"Accept\",\"application/json\");xhr.setRequestHeader(\"Content-Type\",\"application/json\");},success:function(responseObject){if(responseObject.errors!==null){removeFixedErrors(responseObject.errors);if(responseObject.errors.length===0){hideValidationErrorsDiv();showRequiredFieldsStatusDiv(eapp.webforms.validation.formComplete);}else{var errorsFlags=addErrors(\"accordion\",responseObject.errors,true);hideRequiredFieldsStatusDiv();}}}});}\nfunction hideRequiredFieldsStatusDiv(){var $requiredFieldsStatus=getElement(\"#requiredFieldsStatus\");$requiredFieldsStatus.fadeOut(\"slow\");}\nfunction showRequiredFieldsStatusDiv(message){var $requiredFieldsStatus=getElement(\"#requiredFieldsStatus\");$requiredFieldsStatus.html(message).prepend(\"<i class='icon icon-complete' aria-hidden='true'></i>\");$requiredFieldsStatus.fadeIn();}\nfunction hideValidationErrorsDiv(){var $validationErrors=getElement(\"#validationErrors\");$validationErrors.fadeOut(\"slow\");}\nfunction showValidationErrorsDiv(){var $validationErrors=getElement(\"#validationErrors\");$validationErrors.fadeIn();}\n(function($){$.widget(\"custom.combobox\",{_create:function(){this.wrapper=$(\"<span>\").addClass(\"eapp-custom-combobox\").insertBefore(this.element);this._createAutocomplete();this._createShowAllButton();},_createAutocomplete:function(){var selected=this.element.children(\":selected\"),value=selected.val()?selected.text():\"\";value=$.trim(value);this.input=$(\"<input>\").appendTo(this.wrapper).val(value).attr(\"title\",\"\").attr(\"role\",\"combobox\").addClass(\"form-control eapp-custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left\").attr(\"aria-labelledby\",\"question-label-\"+this.wrapper.parent(\"div\").find(\"select\").attr(\"id\")).attr(\"aria-autocomplete\",\"inline\").autocomplete({delay:0,minLength:0,source:$.proxy(this,\"_source\")});this.input.autocomplete({messages:{noResults:eapp.webforms.locale.noResults,results:function(){return eapp.webforms.locale.foundMatch;}}});this._on(this.input,{autocompleteselect:function(event,ui){ui.item.option.selected=true;this._trigger(\"select\",event,{item:ui.item.option});},autocompletechange:\"_removeIfInvalid\"});},_createShowAllButton:function(){var input=this.input,wasOpen=false;$(\"<button>\").attr(\"tabIndex\",-1).attr(\"title\",eapp.webforms.locale.showAllItems).appendTo(this.wrapper).addClass(\"btn btn-default eapp-custom-combobox-toggle\").attr(\"aria-labelledby\",\"eapp-search-label\").attr(\"aria-controls\",\"eapp-list\").append(\"<i class='icon icon-search'></i><span id='eapp-search-label'>\"+eapp.webforms.locale.search+\"</span>\").mousedown(function(){wasOpen=input.autocomplete(\"widget\").is(\":visible\");}).click(function(){input.focus();if(wasOpen){return;}\ninput.autocomplete(\"search\",\"\");});},_source:function(request,response){var matcher=new RegExp($.ui.autocomplete.escapeRegex(request.term),\"i\");response(this.element.children(\"option\").map(function(){var text=$(this).text();text=$.trim(text);if(this.value&&(!request.term||matcher.test(text)))\nreturn{label:text,value:text,option:this};}));},_removeIfInvalid:function(event,ui){if(ui.item){return;}\nconsole.log('Search for a match');var value=this.input.val(),valueLowerCase=value.toLowerCase(),valid=false;this.element.children(\"option\").each(function(){if($(this).text().toLowerCase().indexOf(valueLowerCase)!==-1){this.selected=valid=true;return false;}});if(valid){this.input.attr(\"title\",eapp.webforms.locale.foundMatch)\nreturn;}\nthis.input.val(\"\").attr(\"title\",eapp.webforms.locale.didNotMatchItem);this.element.val(\"\");this._delay(function(){},2500);this.input.val(\"\");},_destroy:function(){this.wrapper.remove();this.element.show();}});})(jQuery);$(function(){$(\"#nocLevel\").combobox();$(\"#toggle\").click(function(){$(\"#nocLevel\").toggle();});});";
var mod_pagespeed_GJKVAmhzaI = "var webFormAccessibility={_popovers:[],ariaRequired:function(required){if(required){return'required aria-required=\"true\"';}else{return'aria-required=\"false\"';}},focusOnFirstTabbableElement:function(panelIndex,panelId){var panelContent=undefined;if($.isNumeric(panelIndex)){var accordionHeaderId=\"ui-accordion-accordion-header-\"+panelIndex;panelContent=$(\"div[aria-labelledby='\"+accordionHeaderId+\"']\");}else if(panelId!=null&&typeof panelId===\"string\"&&panelId.length>0){panelContent=$(\"#\"+panelId);}\nif(panelContent!==undefined&&panelContent.length>0){var firstTabbableEl=panelContent.find(\":tabbable\").first();if(firstTabbableEl.length===1){firstTabbableEl.focus();}}},addPopover:function(field){var id=$(field).attr(\"id\"),field=field,mouseover=false,focus=false,dismissed=false;var popover=this.getPopover(id);if(popover===null){this._popovers.push({id:id,field:field,mouseover:mouseover,focus:focus,dismissed:dismissed});}},getPopover:function(id){var popover=null;for(var a=0,len=this._popovers.length;a<len;a++){var popover=this._popovers[a];if(popover.id===id){return popover;}}\nreturn null;},setPopoverFlag:function(id,flag,bool){var popover=this.getPopover(id);for(var a=0,len=this._popovers.length;a<len;a++){var popover=this._popovers[a];if(popover.id===id){this._popovers[a][flag]=bool;return;}}},getPopoverFlag:function(id,flag){var popover=this.getPopover(id);if(popover!==null){return popover[flag];}else{return null;}},getPopovers:function(){return _popovers;},attachPopover:function(field,popoverClass,popoverContent){if(field){var popoverId=popoverClass+\"-\"+$(field).attr(\"id\");var popoverContent='<div id=\"'+popoverId+'\" class=\"'+popoverClass+'\" role=\"tooltip\" aria-hidden=\"true\">'+'<div class=\"'+popoverClass+'-content\">'+popoverContent+'</div>'+'</div>';$(field).after(popoverContent);webFormAccessibility.updateDescribedby(field,popoverId,'add');}},showPopover:function(field){var popoverId=$(field).attr(\"aria-describedby\");$(\"#\"+popoverId).attr(\"aria-hidden\",\"false\");},hidePopover:function(field){var popoverId=$(field).attr(\"aria-describedby\");$(\"#\"+popoverId).attr(\"aria-hidden\",\"true\");},hideOtherPopovers:function(id,popoverClass){for(var a=0,len=this._popovers.length;a<len;a++){var popover=this._popovers[a];if(popover.id!==id){this._popovers[a]['dismissed']=true;$('#'+popoverClass+\"-\"+popover.id).attr(\"aria-hidden\",\"true\");}}},initializePopovers:function(containsPopoverClass){var hasPopoverClass=$.trim(containsPopoverClass||\"eapp-question-has-popover\"),qaWithPopovers=$(\".\"+hasPopoverClass);if(hasPopoverClass.length===0)\nreturn;if($(qaWithPopovers).length>0){for(var a=0,len=qaWithPopovers.length;a<len;a++){var qa=qaWithPopovers[a];webFormAccessibility.bindPopovers(qa);}}},bindPopovers:function(qa){var field,fields,popoverClass=\"eapp-popover\",qaClass=\"eapp-question-and-answer\",qdClass=\"question-date\",ctrlClass=\"form-control\";if(!$(qa).hasClass(qaClass))\nreturn;var dateGroup=$(qa).find(\".\"+qdClass);if(dateGroup&&dateGroup.length===1){$(qa).addClass(\"popover-date\");fields=$(qa).find(\".\"+qdClass+\" .\"+ctrlClass);if(fields&&fields.length>0){for(var a=0,len=fields.length;a<len;a++){field=fields[a];webFormAccessibility.bindPopoverEvents(qa,popoverClass,field);}}}else{field=$(qa).find(\"input.\"+ctrlClass+\", select.\"+ctrlClass);if(field&&field.length===1){webFormAccessibility.bindPopoverEvents(qa,popoverClass,field);}}},bindPopoverEvents:function(qa,popoverClass,field){webFormAccessibility.addPopover(field);webFormAccessibility.hidePopover(field);var id=$(field).attr(\"id\");var popover=webFormAccessibility.getPopover(id);$(field).on(\"mouseover\",function(event){event.preventDefault();event.stopPropagation();webFormAccessibility.setPopoverFlag(id,'mouseover',true);webFormAccessibility.hideOtherPopovers(id,popoverClass);webFormAccessibility.showPopover(field);});$(field).on(\"focus\",function(event){event.preventDefault();event.stopPropagation();webFormAccessibility.setPopoverFlag(id,'focus',true);webFormAccessibility.hideOtherPopovers(id,popoverClass);webFormAccessibility.showPopover(field);});$(field).on(\"blur\",function(event){event.preventDefault();event.stopPropagation();webFormAccessibility.setPopoverFlag(id,'focus',false);webFormAccessibility.setPopoverFlag(id,'dismissed',false);var mouseover=webFormAccessibility.getPopoverFlag(id,'mouseover');if(mouseover==false){webFormAccessibility.hidePopover(field);}});$(field).on(\"mouseout\",function(event){event.preventDefault();event.stopPropagation();webFormAccessibility.setPopoverFlag(id,'mouseover',false);var dismissed=webFormAccessibility.getPopoverFlag(id,'dismissed');var focus=webFormAccessibility.getPopoverFlag(id,'focus');if(dismissed==true||focus==false){webFormAccessibility.hidePopover(field);}});$(field).keydown(function(event){var KEY_ESC=27;if(event.which==KEY_ESC){event.preventDefault();event.stopPropagation();webFormAccessibility.hidePopover(field);webFormAccessibility.setPopoverFlag(id,'dismissed',true);}});},ariaLabelledOrDescribedBy:function(labelOrDescription,text,idText){var labelOrDescription=$.trim(labelOrDescription||''),s=$.trim(text||''),idText=$.trim(idText||''),id=[];if((idText.length===0)||('label'!==labelOrDescription&&'description'!==labelOrDescription))\nreturn'';if(text!==null&&s.length===0)\nreturn'';id.push('question',labelOrDescription,idText);id=id.join('-');if('label'===labelOrDescription){return'aria-labelledby=\"'+id+'\"';}else{return'aria-describedby=\"'+id+'\"';}},ariaProp:function(prop,text,id){if('labelled'===prop){return webFormAccessibility.ariaLabelledOrDescribedBy('label',text,id);}else if('described'===prop){return webFormAccessibility.ariaLabelledOrDescribedBy('description',text,id);}else{return'';}},quotesToEntities:function(s){s=s.replace(/\\\"/g,'&quot;');s=s.replace(/\\'/g,'&#039;');return s;}};";
